// Form styling
@import 'variables';
@import 'colors';
@import 'Button';
@import 'mixins/_box-shadow';
@import 'mixins/_buttons';
@import 'mixins/_forms';

.form-control,
input[type=text],
input[type=password],
input[type=email],
textarea {
  @include form-control(100%);
  &.form-control--lg {
    padding: $input-padding-y-lg $input-padding-x-lg;
  }
}

input[type=number] {
  @include form-control(7rem);
}

// wrapper for form controls
.form-field {
  //@include form-field();
  margin-bottom: .5rem;
  .error-message {
    position: absolute;
    font-size: .7rem;
    color: $gray-darkest;
    border-radius: .2rem;
    &:not(:empty) {
      padding: .3rem .5rem;
      background-color: $table-cell-isselected-color;
      @include box-shadow($box-shadow);
      &:after {
      	bottom: 100%;
      	left: 1rem;
      	border: solid transparent;
      	content: " ";
      	height: 0;
      	width: 0;
      	position: absolute;
      	pointer-events: none;
      	border-color: rgba(136, 183, 213, 0);
        border-bottom-color: $table-cell-isselected-color;
      	border-width: 5px;
      	margin-left: -5px;
      }
    }
  }
}

.form-field--condensed {
  margin-bottom: .2rem;
}

// cross browser select styling
select {
  display: block;
  margin-bottom: .5rem;
  padding: $input-padding-y 2rem $input-padding-y $input-padding-x;
  font-size: .9rem;
  font-weight: 400;
  line-height: 1.3;
  height: 2.6rem;
  border: 1px solid $gray-light;
  // reset browser specific styling
  background-color: #fff;
  background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjQsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iNjEycHgiIGhlaWdodD0iNzkycHgiIHZpZXdCb3g9IjAgMCA2MTIgNzkyIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA2MTIgNzkyIiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjx0aXRsZT5hcnJvd3M8L3RpdGxlPg0KPHBhdGggZD0iTTIyMS42NTIsMzY5Ljg2NGw4NC43NDUtMTE4LjAwOGw4My45NTEsMTE4LjAwOEgyMjEuNjUyeiBNMzkwLjM0OCw0MjIuMTM2bC04My45NTEsMTE4LjAwOGwtODQuNzQ1LTExOC4wMDhIMzkwLjM0OHoiLz4NCjwvc3ZnPg0K');
  background-position: right 0px center;
  background-repeat: no-repeat;
  background-size: auto 100%;
  -moz-appearance: none;
  -webkit-appearance: none;
  appearance: none;
  &.white-arrow {
    color: #fff;
    background-color: transparent;
    background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjQsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iNjEycHgiIGhlaWdodD0iNzkycHgiIHZpZXdCb3g9IjAgMCA2MTIgNzkyIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA2MTIgNzkyIiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjx0aXRsZT5hcnJvd3M8L3RpdGxlPg0KPHBhdGggZmlsbD0iI0ZGRkZGRiIgZD0iTTIyMS42NTIsMzY5Ljg2NGw4NC43NDUtMTE4LjAwOGw4My45NTEsMTE4LjAwOEgyMjEuNjUyeiBNMzkwLjM0OCw0MjIuMTM2bC04My45NTEsMTE4LjAwOGwtODQuNzQ1LTExOC4wMDgNCglIMzkwLjM0OHoiLz4NCjwvc3ZnPg0K');
    option {
      color: $gray-darkest; // for firefox only
      background: #fff; // for firefox only
    }
  }
  &.select--condensed {
    height: 2rem;
    margin-bottom: .2rem;
  }
  &.select--full-width {
    width: 100%;
  }
  &.select--inline {
    display: inline-block;
    margin-left: .3rem;
  }
  &:focus {
    @include form-field-focus();
  }
  &.multiple {
    background: white;
    transition: height .3s ease;
    &:hover {
      height: 100%;
      &.personal-context {
        height: 9rem;
      }
    }
  }
}

// styling for range inputs

input[type=range] {
  -webkit-appearance: none;
  width: 100%;
  background: transparent;

  &::-webkit-slider-thumb {
    -webkit-appearance: none;
  }

  &:focus {
    outline: none;
    &::-webkit-slider-thumb {
      @include form-field-focus();
    }
    &::-moz-range-thumb {
      @include form-field-focus();
    }
    &::-ms-thumb {
      @include form-field-focus();
    }
  }

  &::-ms-track {
    width: 100%;
    cursor: pointer;
    background: transparent;
    border-color: transparent;
    color: transparent;
  }

  &::-webkit-slider-thumb {
    -webkit-appearance: none;
    margin-top: -.4rem;
    @include range-thumb();
  }

  &::-moz-range-thumb {
    @include range-thumb();
  }

  &::-ms-thumb {
    @include range-thumb();
  }

  &::-webkit-slider-runnable-track {
    width: 100%;
    height: .2rem;
    background: #abe2fb;
    border-radius: .5rem;
    cursor: pointer;
  }

  &::-webkit-slider-runnable-track {
    @include range-track();
  }

  &:focus::-webkit-slider-runnable-track {
    background: #abe2fb;
  }

  &::-moz-range-track {
    @include range-track();
  }

  &::-ms-track {
    width: 100%;
    height: .2rem;
    cursor: pointer;
    background: transparent;
    border-color: transparent;
    border-width: 16px 0;
    color: transparent;
  }

  &::-ms-fill-lower {
    background: #abe2fb;
    border-radius: .5rem;
  }

  &:focus::-ms-fill-lower {
    background: #abe2fb;
  }

  &::-ms-fill-upper {
    background: #abe2fb;
    border-radius: .5rem;
  }

  &:focus::-ms-fill-upper {
    background: #abe2fb;
  }

}






// undo the white arrow on the landing page - this is annoying, need to fix
// .is-landing select.white-arrow {
//   color: $text-color;
//   background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjQsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iNjEycHgiIGhlaWdodD0iNzkycHgiIHZpZXdCb3g9IjAgMCA2MTIgNzkyIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA2MTIgNzkyIiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjx0aXRsZT5hcnJvd3M8L3RpdGxlPg0KPHBhdGggZD0iTTIyMS42NTIsMzY5Ljg2NGw4NC43NDUtMTE4LjAwOGw4My45NTEsMTE4LjAwOEgyMjEuNjUyeiBNMzkwLjM0OCw0MjIuMTM2bC04My45NTEsMTE4LjAwOGwtODQuNzQ1LTExOC4wMDhIMzkwLjM0OHoiLz4NCjwvc3ZnPg0K');
// }

// Form groups
//
// Designed to help with the organization and spacing of vertical forms. For
// horizontal forms, use the predefined grid classes.

.form-group {
  position: relative;
  margin-bottom: $form-group-margin-bottom;
}

.form-group--condensed {
  margin-bottom: .2rem;
}

.form-group .search-criteria { //HACK
  width: 100%;
  .search-field {
    border-left: 1px solid $gray-light;
  }
}


// 2 or more form controls attached to each other in a unified bar

.form-bar {
  display: flex;
  width: 100%;
  justify-content: flex-start;
  align-items: flex-end;
  .form-group {
    flex-grow: 1;
    margin: 0;
  }
}

.attached-input-btn {
  display: flex;
  align-items: center;
  flex-grow: 0;
  height: $text-input-height;
  padding: 0 1rem;
  font-size: .9rem;
  cursor: pointer;
  &.attached-right {
    color: #fff;
    background-color: $primary-color;
    border-top-right-radius: .2rem;
    border-bottom-right-radius: .2rem;
    border: 0;
  }
  &.attached-left {
    color: $gray-darkest;
    background-color: $gray-light;
    border-top-left-radius: .2rem;
    border-bottom-left-radius: .2rem;
    border: 0;
  }
}




.form-group-inline {
  display: flex;
  align-items: center;
  justify-content: flex-start;
  margin-right: 1rem;
  > * {
    margin-right: .5rem;
  }
}


// layout

// display children inline
// might need to expand upon this, but this is all we need for now
.display-inline {
  .radio-btn, .checkbox-btn {
    display: inline-block;
  }
}

// labels for anything

label {
  font-size: inherit;
  &.label-inline {
    margin-right: .3rem;
  }
}

.form-group label {
  margin-bottom: .5rem;
}

// Radios and Checkboxes
// ==============================================================

// Indent the labels to position radios/checkboxes as hanging controls.

.radio,
.checkbox {
  position: relative;
  display: block;
  // margin-top:    ($spacer * .75);
//  margin-bottom: ($spacer * .75);

  label {
    padding-left: 1.25rem;
    margin-bottom: 0;
    font-weight: 400;
    cursor: pointer;

    // When there's no labels, don't position the input.
    input:only-child {
      position: static;
    }
  }
}
.radio input[type="radio"],
.radio-inline input[type="radio"],
.checkbox input[type="checkbox"],
.checkbox-inline input[type="checkbox"] {
  margin-right: .3rem;
  //position: absolute;
  //margin-top: .3rem;
  // margin-top: 4px \9;
  //margin-left: -1.25rem; // what is this for??
}

.radio + .radio,
.checkbox + .checkbox {
  // Move up sibling radios or checkboxes for tighter spacing
  margin-top: -.25rem;
}

// Radios and checkboxes on same line
.radio-inline,
.checkbox-inline {
  position: relative;
  display: inline-block;
  margin-bottom: 0;
  padding-right: 1rem;
  font-weight: normal;
  vertical-align: middle;
  cursor: pointer;
}
.radio-inline + .radio-inline,
.checkbox-inline + .checkbox-inline {
  margin-top: 0;
  margin-left: .75rem;
}

// Apply same disabled cursor tweak as for inputs
// Some special care is needed because <label>s don't inherit their parent's `cursor`.
//
// Note: Neither radios nor checkboxes can be readonly.
input[type="radio"],
input[type="checkbox"] {
  &:disabled,
  &.disabled {
    cursor: $cursor-disabled;
  }
}
// These classes are used directly on <label>s
.radio-inline,
.checkbox-inline {
  &.disabled {
    cursor: $cursor-disabled;
  }
}
// These classes are used on elements with <label> descendants
.radio,
.checkbox {
  &.disabled {
    label {
      cursor: $cursor-disabled;
    }
  }
}

// convert radio buttons and checkboxes to look like buttons
.radio-btn, .checkbox-btn {
  input {
    display: none;
    &:checked + label {
      @extend .btn-secondary-reverse.is-active;
    }
  }
  label {
    @extend .btn;
    @extend .btn-secondary-reverse;
  }
  label.disabled {
    background-color: rgba(189, 195, 199, 1.0);
    cursor: not-allowed;
  }
}





// ELEMENTS APPEAR/USED IN BROKER UI ONLY - revisit when we begin working on it again

legend {
  margin: 0 0 .5rem 0;
  font-size: .9rem;
}

.broker {
  div {
    transition: opacity .3s ease;
    .disabled {
      opacity: 0.5;
      pointer-events: none;
    }
  }
  fieldset {
    margin: 0 0 1.5rem 0;
  }
}

.broker .search-criteria:first-of-type .search-field {
  margin: 20px 0 0;
}

.display-inline .search-criteria:first-of-type .search-field {
  margin: 0;
}

.broker-cal.search-form-stacked {
  height: 0;
  transition: height .3s ease-in-out;
  .search-criteria {
    opacity: 0;
    transition: opacity .3s ease-in-out;
    .tag-group-list {
      position: absolute;
      top: 0;
      padding: .6rem 0 0 3rem;
    }
    .active-date-input {
      z-index: 1;
    }
  }
  &.active {
    .search-criteria {
      opacity: 1;
    }
    height: 3rem;
  }
}

.broker .search-field {
  display: flex;
}

.broker-name-form {
  height: 3rem;
  display: flex;
}
